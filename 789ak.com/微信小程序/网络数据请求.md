- 小程序中网络数据请求的限制

  出于安全性的考虑，小程序官方对数据接口的请求做出了如下的两个限制：

  - 只能请求HTTPS类型的接口
  - 必须将接口的域名添加到信任列表中

- 配置request合法域名

  注意事项：

  - 域名只支持https协议
  - 域名不能使用IP地址或localhost
  - 域名必须经过ICP备案
  - 服务器域名一个月内最多可申请5次修改

![image-20230429130440697](http://cdn.789ak.com/img/image-20230429130440697.png)

### 发放GET请求

```js
getInfo() {
    wx.request({
      url: 'https://www.escook.cn/api/get',
      method: "GET",
      data: {
        name:"zs",
        age:20
      },
      success: (res) => {
        console.log(res.data)
      }
    })
  },
```

### 发放POST请求

```js
postInfo() {
    wx.request({
      url: 'https://www.escook.cn/api/post',
      method: "POST",
    data:{
      name: "goil",
      age:21
    },
    success:(res)=> {
      console.log(res.data)
    }
    })
  },
```

### 在页面刚加载时请求数据

```js
 /**
   * 生命周期函数--监听页面加载
   */
  onLoad(options) {
    this.getInfo()
    this.postInfo()
  },
```

### 跳过request合法域名校验

如果只有http协议接口。可以在详情 -> 本地设置内 --> 开发环境不校验请求域名 来进行设置。

![image-20230429130945223](http://cdn.789ak.com/img/image-20230429130945223.png)

### 关于跨域和Ajax的说明

跨域问题只存在于基于浏览器的Web开发中。由于小程序的宿主环境不是浏览器，而是微信客户端，所以小程序中不存在跨域问题。

Ajax技术的核心是依赖于浏览器中的XMLHttpRequest这个对象，由于宿主环境是微信客户端，所以小程序中不能叫做”发起Ajax请求“，而是叫做”发起网络数据请求“。

