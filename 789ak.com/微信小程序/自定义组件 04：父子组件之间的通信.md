父子组件之间通信的3种方式

1. 属性绑定
   - 用于父组件向子组件的指定属性设置数据，仅能设置JSON兼容的数据
2. 事件绑定
   - 用于子组件向父组件传递数据，可以传递任意数据
3. 获取组件实例
   - 父组件可以通过`this.selectComponent()`获取子组件实例对象
   - 这样就可以直接访问子组件的任意数据和方法

## 属性绑定

属性绑定用于实现父向子传值，而且只能传递普通类型的数据，无法将方法传递给子组件。

```html
// 父组件的data节点
data: {
	count:0
}

// 父组件的wxml结构
<my-test3 count="{{count}}"></my-test3>
<view> 父组件中，count 是{{count}}</view>
```

子组件在properties节点中声明对应的属性并使用。

```html
// 子组件的properties节点
properties: {
	count: Number
}

// 子组件的wxml结构
<view> 子组件中，count是{{count}}</view>
```

## 事件绑定

事件绑定用于实现子向父传值，可以传递任何类型的数据。使用步骤如下：

1. 在**父组件**的js中，定义一个函数，这个函数即将通过自定义事件的形式，传递给子组件

   ```js
   syncCount() {
   	console.log("syncCount")
   }
   ```

   

2. 在**父组件**的wxml中，通过自定义事件的形式，将步骤一中定义的函数引用，传递给子组件

   ```html
   <my-test3 count={{count}} bind:sync="syncCount"></my-test3>
   ```

3. 在**子组件**的js中，通过调用`this.triggerEvent('自定义事件名称', {参数对象})`，将数据发送到父组件

   ```js
   // 子.js
   addCount() {
   	this.triggerEvent("sync", {value: this.properties.count})
   }
   ```

   

4. 在**父组件**的js中，通过`e.detail`获取子组件传递过来的数据

   ```js
   // 父.js
   syncCount(e) {
   	this.setData({
   	count: e.detail.value
   	})
   }
   ```

   

### 获取组件实例

可在父组件里调用`this.selectComponent("id or class选择器")`，获取子组件的实例对象，从而直接访问子组件的任意数据和方法。调用时需要传入一个选择器。

```js
getChild() {
	const child = this.selectComponent(".chlid1")
	child.setData({
		count: child.properties.count + 1
	})
	child.addCount()
}
```

