创建组件

1. 在项目的根目录中，鼠标右键，创建components -> test文件夹
2. 在新建的components -> test文件夹上，鼠标右键点击“新建Component”
3. 键入组件名后回车，会自动生成组件对应的4个文件。后缀分别为：.js .json .wxml .wxss

> 为了保证目录结构的清晰，建议把不同的组件存放到单独目录中。

引入组件

组件的引入方式分为： “局部引入”和“全局引入”。

- 局部引入：组件只能在当前被引用的页面内使用。
- 全局引用：组件可以在每个小程序页面中使用。

![image-20230502152138602](http://cdn.789ak.com/img/image-20230502152138602.png)

根据组件的使用频率和范围，来选择合适的引用方式：

- 如果某组件在多个页面中经常被用到，建议进行“全局引用”
- 如果某组件只在特点的页面中被用到，建议进行“局部引用”

组件和页面的区别：

- 组件的.json文件中需要声明“component":true属性
- 组件的.js文件中调用的是Component()函数
- 组件的事件处理函数需要定义到methods节点中

### 样式

#### 组件样式隔离：

​	默认情况下，自定义组件的样式只对当前组件生效，不会影响到组件之外的UI结构。

- app.wxss中的全局样式对组件无效
- 只有class选择器会有样式隔离效果，其他样式选择不受样式隔离的影响

> 建议：在组件和引用组件的页面内使用class选择器。

#### 修改组件样式的隔离选项：

​	默认情况下，自定义组件的样式隔离特性能够防止组件内外样式互相干扰的问题。但有时，我们希望在外界能够控制组件内部的样式，此时，可以通过styleIsolation修改组件的样式隔离选项。

![image-20230502152909688](http://cdn.789ak.com/img/image-20230502152909688.png)

![image-20230502152917836](http://cdn.789ak.com/img/image-20230502152917836.png)

### 数据、方法和属性

#### 数据

在小程序组件中，用于组件模板渲染的私有数据，需要定义到data节点。

```js
  /**
   * 组件的初始数据
   */
  data: {
    n1:0,
    n2:0,
    sum:0,
  },
```

同时，在小程序组件中，properties是组件对外属性，用来接收外界传递到组件中的数据。

```js
 /**
   * 组件的属性列表
   */
  properties: {

  },
```



data和properties区别：

在小程序组件中，两者用法相同，它们都是可读可写的，只不过：

- data更倾向于存储组件的私有数据。
- properties更倾向于存储外界传递到组件中的数据。

使用setData修改properties属性的值和修改data值用法一致。

#### methods方法

在小程序组件中，事件处理函数和自定义方法需要定义到methods节点中。

> 建议自定义方法用"_"来标注。

#### observers 数据监听器

数据监听器用于监听和响应任何属性和数据字段的变化，从而执行特定的操作。

```js
  observers: {
    'n1, n2': function(new1, new2) {
      this.setData({
        sum:new1 + new2
      })
    }
```

监听对象属性的变化：

```python
'obj.p1, obj.p2': function(new1, new2) {
	this.setData({
		obj.p1 = new1
		obj.p2 = new2
	})
},
'obj.**':function(obj) {
    this.setData({
        obj = obj
    })
}
```

