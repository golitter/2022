<blockquote>当类中有指针成员时，一般有两种方式来管理指针成员：一是采用值型的方式管理，每个类对象都保留一份指针指向的对象的拷贝；另一种更优雅的方式是使用智能指针，从而实现指针指向的对象的共享。
智能指针(smart pointer)的一种通用实现技术是使用引用计数(reference count)。智能指针类将一个计数器与类指向的对象相关联，引用计数跟踪该类有多少个对象的指针指向同一对象。</blockquote>
&nbsp;

在C++中使用原始指针容易导致内存泄漏等问题，因此出现了智能指针。智能指针使用RAII(Resource Acquisition Is Initialization，资源获取即初始化)机制对普通指针进行的封装，<span style="color: #ff0000;"><strong>智能指针是一个类</strong></span>。

智能指针有四个：
<ul>
 	<li>auto_ptr (<span style="color: #ff0000;">C++11已摒弃</span>)</li>
 	<li>unique_ptr</li>
 	<li>shared_ptr</li>
 	<li>weak_ptr</li>
</ul>
<pre class="EnlighterJSRAW" data-enlighter-language="cpp" data-enlighter-theme="monokai">shared_ptr&lt;int&gt; p = new int(123); // 不能将指针赋给对象。
</pre>
&nbsp;

<strong>auto_ptr: </strong>

unique_ptr对象包装一个原始指针，并负责其生命周期。当该unique_ptr对象被销毁时，会在其析构函数中删除关联的原始指针。且<span style="color: #00ff00;">没有复制构造函数，不支持普通的拷贝和赋值操作。</span>但是可以使用 move()进行转换。
<pre class="EnlighterJSRAW" data-enlighter-language="cpp" data-enlighter-theme="monokai">unique_ptr&lt;int&gt; p1(new int(12));
unique_ptr&lt;int&gt; p2(p1); // 报错，
unique_ptr&lt;int&gt; p3(std::move(p1)); // 可以</pre>
<strong>shared_ptr: </strong>

shared_ptr采用了引用计数器，多个shared_ptr中的T *ptr指向同一个内存区域（同一个对象），并共同维护同一个引用计数器。shared_ptr定义如下,记录同一个实例被引用的次数，当引用次数大于0时可用，等于0时释放内存。

每个 shared_ptr 对象在内部维护着两个内存位置：
1、指向对象的指针。
2、用于控制引用计数数据的指针。
<pre class="EnlighterJSRAW" data-enlighter-language="cpp" data-enlighter-theme="monokai">shared_ptr&lt;int&gt; p(new int (3));
shared_ptr&lt;int&gt; p2(p);</pre>
<pre class="EnlighterJSRAW" data-enlighter-language="cpp" data-enlighter-theme="monokai">p.get(); // 获取指针
p.use_count(); // 计数引用</pre>
make_shared是标准库函数，此函数在动态内存中分配一个对象并初始化它，返回指向此对象的shared_ptr。建议用 make_shared&lt;T&gt;()来返回智能指针。
<pre class="EnlighterJSRAW" data-enlighter-language="cpp" data-enlighter-theme="monokai">shared_ptr&lt;int&gt; p = make_shared&lt;int&gt;(143);</pre>
注意*：
<ul>
 	<li>不能将一个原始指针初始化多个shared_ptr</li>
</ul>
<pre class="EnlighterJSRAW" data-enlighter-language="cpp" data-enlighter-theme="monokai">int *ptr = new int(234);
shared_ptr&lt;int&gt; p1(ptr);
shared_ptr&lt;int&gt; p2(ptr);
// 报错原因：
    // 因为p1,p2都要进行析构删除，这样会造成原始指针p0被删除两次。</pre>
<ul>
 	<li>用普通指针初始化智能指针时，引用计数器初始化为</li>
 	<li>循环引用问题</li>
</ul>
可以用 weak_ptr 代替

&nbsp;

<a href="https://blog.csdn.net/bitcarmanlee/article/details/124847634?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167603135316782427437336%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=167603135316782427437336&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-124847634-null-null.142^v73^control,201^v4^add_ask,239^v1^insert_chatgpt&amp;utm_term=c%2B%2B%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88&amp;spm=1018.2226.3001.4187">c++智能指针详解</a>

<a href="https://blog.csdn.net/niaxiapia/article/details/125530820?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167603343416800211565996%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=167603343416800211565996&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~baidu_landing_v2~default-1-125530820-null-null.142^v73^control,201^v4^add_ask,239^v1^insert_chatgpt&amp;utm_term=c%2B%2B%20unique_ptr&amp;spm=1018.2226.3001.4187">C++ unique_ptr</a>

<a href="https://blog.csdn.net/feikudai8460/article/details/122023528?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167603206716800213099606%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=167603206716800213099606&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~baidu_landing_v2~default-1-122023528-null-null.142^v73^control,201^v4^add_ask,239^v1^insert_chatgpt&amp;utm_term=c%2B%2B%20shared_ptr&amp;spm=1018.2226.3001.4187">C++智能指针详解：shared_ptr</a>

<a href="https://blog.csdn.net/sinat_31608641/article/details/107346344?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167603246516800184185565%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=167603246516800184185565&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~baidu_landing_v2~default-1-107346344-null-null.142^v73^control,201^v4^add_ask,239^v1^insert_chatgpt&amp;utm_term=c%2B%2B%20make_shared%3Cint%3E&amp;spm=1018.2226.3001.4187">C++make_shared的使用</a>

&nbsp;

