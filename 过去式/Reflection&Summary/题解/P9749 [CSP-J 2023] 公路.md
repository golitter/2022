[P9749 [CSP-J 2023\] 公路 - 洛谷 | 计算机科学教育新生态 (luogu.com.cn)](https://www.luogu.com.cn/problem/P9749)

考虑贪心。对于$a_i$来说使用价格为$a_i$的区间一定满足$a_j(j >= i)$且$max(a_j) <= a_i$。因此用前缀和预处理即可。

为什么不每次只考虑一段呢？因为题目给出“只出售整数升油”，因此每次只考虑两站之间的距离会因为**向上取整而得到大于最小值的情况**。

```cpp
#include <bits/stdc++.h>
using namespace std;
#define int long long
void solve() {
    int n,d; cin>>n>>d;
    vector<int> a(n + 1), b(n + 1);
    for(int i = 2; i <= n; ++i) {
        cin>>a[i];
        a[i] += a[i - 1];
        b[i] = (a[i] + d - 1) / d; // 前缀和预处理到第一个站口所需要的容量
    }
    vector<int> c(n + 1);
    for(int i = 1; i <= n; ++i) cin>>c[i];
    int now = c[1]; // 第一站必须要
    int ans = 0;
    for(int i = 2;  i <= n; ++i) {
        ans += now * (b[i] - b[i - 1]); // 增加本段用油的油价
        now = min(now, c[i]); // 如果当前站点油比用的油便宜，换成当前站点买
    }
    cout<<ans<<endl;
}
signed main()
{
    solve();
    return 0;
}
```

